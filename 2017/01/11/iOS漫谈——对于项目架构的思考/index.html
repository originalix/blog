<!DOCTYPE html><html lang=""><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> iOS漫谈——对于项目架构的思考 | Originalee的博客</title><meta name="description" content="iOS漫谈——对于项目架构的思考 - Originalee"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/casual.css"><link rel="stylesheet" href="/css/semantic.min.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Originalee的博客"></head><body><div class="sidebar"><div class="ui vertical inverted menu"><div class="h100"></div><h3 class="ui inverted aligned icon header"><div class="content"><a href="/" class="title-link">ORIGINALEE的博客</a></div></h3><div class="h50"></div><div class="side-nav"><a href="/" target="_self" class="item">HOME<i class="icon home"></i></a><a href="/archives" target="_self" class="item">ARCHIVE<i class="icon archive"></i></a><a href="/about" target="_self" class="item">INFO<i class="icon info"></i></a><a href="/atom.xml" target="_self" class="item">RSS<i class="icon rss"></i></a></div><div class="item"><div class="ui inverted transparent icon input"><input type="text" placeholder="Search..." class="st-default-search-input"><i class="search icon"></i></div></div><div class="h50"></div></div><div class="h50 mq"><a class="ui teal big label"><i class="content icon"></i></a></div><div class="author-info"><a href="/" class="img-link"><img src="/avatar.png" class="author-photo ui tiny circular image"></a><h4 class="ui aligned icon header"><div class="content">Originalee</div></h4><p class="author-desc">爱打篮球的程序员|目前移动端爬坑中</p><div class="social-outer"><div class="social-inner"><a href="https://github.com/originalix" target="_blank" class="social-link"><i class="icon github"></i></a><a href="mailto:xiao.liunit@gmail.com" target="_self" class="social-link"><i class="icon mail"></i></a></div></div></div></div><div class="main"><div class="wrap"><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">iOS漫谈——对于项目架构的思考</h1><div class="post-info"><div class="post-date"><h6 class="ui header"><i class="calendar icon"></i><div class="content">Jan 11, 2017</div></h6></div></div><div class="post-content"><p>又一次的版本更新上架，心情容不得片刻舒缓，新的迭代任务又明白的摆在桌面上。今年上半年自己琢磨完<code>ReactiveCocoa</code>之后，对手上了项目做了<code>MVVM</code>架构的尝试，当时自我感觉效果还不错，代码之间的关系确实变得清楚了，并且有更加多的机会去进行单元测试，但是在新的一年，回头再去思考自己当时的架构，依旧会发现很多的问题，例如虽然逻辑清晰，但是并没有完全解耦，一些界面任务的处理，依旧通过<code>RAC</code>返回到<code>View</code>层去处理。只是<code>Controller</code>更干净了，心里自己觉得舒服罢了。</p>
<p>之后又经手了现在这个项目，在最近不断的工作不断的熟悉业务代码的同时，近日来对于架构方面的思考也不少。这个项目模块之间功能清晰，业务A和业务B之间耦合较少，但是在未来的日子里，公司又有可能新启动项目，不出意外会使用到跟当前项目相同的模块，而如何能节约时间，亦或是在当前项目上调优架构，是我最近思考的主题。</p>
<a id="more"></a>
<p>在了解体会了项目中越来越多的缺点之后，我的脑子里首先蹦出来的就是<strong>模块化开发</strong>这个概念，这个概念在脑子里成形之后，我阅读了大量的他人组件化开发的源码，从阿里大神刘坤的博客里再到蘑菇街的组件化之路，大家再做<code>iOS</code>组件化开发时，似乎都或多或少的受到了路由这个概念的影响，这个概念是在各个模块之间，或者每个页面之间都用<code>url</code>来进行跳转，具体的话可以去查看<code>JLRoute</code>这个框架，是一个把<code>URL</code>跳转使用的非常好的一个框架，很理想。</p>
<p>但是我认为<code>URL</code>的路由概念虽好，但是在App启动时需要实例化各组件的模块，说白了就是有个类似注册各个模块的行为，而在组件化的过程中，注册<code>URL</code>并不是充分必要条件，会造成不必要的内存常驻，如果是注册<code>Class</code>，内存常驻会小一点，如果是注册实例，组件多了，常驻的内存也就更大了。</p>
<p>上述是第一点原因，其二，我认为当前团队，当开发人员去切换到路由模式，学习成本过大，我并不像在之前的公司，在软件团队里是一个决策者，当前我只是一个普通的程序员，改良架构这种事情的推动力度不够大，所以暂时先抛开组件化开发的这个想法。</p>
<p>其三，目前项目的时机未到，当前的项目还没有到相对完善的时候，迭代的压力也比较大，就目前的项目状况来看，似乎常规的开发模式还是可以沿用一段时间的，毕竟组件化开发的成效在小团队模式单项目的模式下不会体现的特别明显，反而团队越大，组件开发的必要性越强。并且当前团队在用<code>Swift</code>开发项目，如果希望最优的模块化开发，还是需要依赖到OC的<code>runtime</code>的。</p>
<p>至于如何进行组件化开发，我这里也就不赘述了，网上优秀的团队博客说了很多，比如阿里念纪、微信阅读、蘑菇街、casatwy等等。每一个都对组件化有独到的见解，而我现在能谈得所有见解，只不过是站在这些巨人的肩膀上汲取到的一点皮毛，真正的感想，还需等实践之后再来谈。</p>
<p>最近就打算写个小模块，把这个模块完全封装成一个组件，植入到App中。</p>
<p>对于缓存和数据持久化，我也想到了一个似乎可以更好处理，更干净的方案，等到测试完成，再写个文章单独讲述吧。</p>
</div></article></div></section><footer><div class="paginator"><a href="/2017/01/17/iOS开发——在CocoaPods发布个人第三方库/" class="prev"><button class="ui button teal">上一篇</button></a><a href="/2017/01/06/使用Block提高代码可读性/" class="next"><button class="ui button teal">下一篇</button></a></div><div data-thread-key="2017/01/11/iOS漫谈——对于项目架构的思考/" data-title="iOS漫谈——对于项目架构的思考" data-url="http://yoursite.com/2017/01/11/iOS漫谈——对于项目架构的思考/" class="ds-share"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><span class="ds-more">分享到：</span></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul></div></div><div data-thread-key="2017/01/11/iOS漫谈——对于项目架构的思考/" data-title="iOS漫谈——对于项目架构的思考" data-url="http://yoursite.com/2017/01/11/iOS漫谈——对于项目架构的思考/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"originalee"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
   || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2015 - 2017 <a href="http://yoursite.com">Originalee</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and theme by <a href="https://github.com/littlewin-wang/hexo-theme-casual" target="_blank">casual</a></p></div></footer></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script><script src="/js/jquery.goup.min.js"></script><script src="/js/semantic.min.js"></script><script src="/js/casual.js"></script><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>$(document).ready(function(){$.goup({trigger:100,bottomOffset:100,locationOffset:5,title:'',titleAsText:true});});</script><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','TvAnFS4AVxjiJUvrZJRB','2.0.0');</script></div></body></html>