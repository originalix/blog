<!DOCTYPE html><html lang=""><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> iOS开发——Core Graphics绘图 | Originalee的博客</title><meta name="description" content="iOS开发——Core Graphics绘图 - Originalee"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/casual.css"><link rel="stylesheet" href="/css/semantic.min.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Originalee的博客"></head><body><div class="sidebar"><div class="ui vertical inverted menu"><div class="h100"></div><h3 class="ui inverted aligned icon header"><div class="content"><a href="/" class="title-link">ORIGINALEE的博客</a></div></h3><div class="h50"></div><div class="side-nav"><a href="/" target="_self" class="item">HOME<i class="icon home"></i></a><a href="/archives" target="_self" class="item">ARCHIVE<i class="icon archive"></i></a><a href="/about" target="_self" class="item">INFO<i class="icon info"></i></a><a href="/atom.xml" target="_self" class="item">RSS<i class="icon rss"></i></a></div><div class="item"><div class="ui inverted transparent icon input"><input type="text" placeholder="Search..." class="st-default-search-input"><i class="search icon"></i></div></div><div class="h50"></div></div><div class="h50 mq"><a class="ui teal big label"><i class="content icon"></i></a></div><div class="author-info"><a href="/" class="img-link"><img src="/avatar.png" class="author-photo ui tiny circular image"></a><h4 class="ui aligned icon header"><div class="content">Originalee</div></h4><p class="author-desc">爱打篮球的程序员|目前移动端爬坑中</p><div class="social-outer"><div class="social-inner"><a href="https://github.com/originalix" target="_blank" class="social-link"><i class="icon github"></i></a><a href="mailto:xiao.liunit@gmail.com" target="_self" class="social-link"><i class="icon mail"></i></a></div></div></div></div><div class="main"><div class="wrap"><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">iOS开发——Core Graphics绘图</h1><div class="post-info"><div class="post-date"><h6 class="ui header"><i class="calendar icon"></i><div class="content">Jun 4, 2016</div></h6></div></div><div class="post-content"><p>我们在搭建UI界面时，有很多时候，我们会用到iOS自带的绘图功能来完成一些界面的效果，很常用也很方便。今天我们在这里就一起讨论一下iOS的绘图功能。</p>
<ul>
<li><p>CoreGraphics也称为Quartz 2D 是UIKit下的主要绘图系统，频繁的用于绘制自定义视图。Core Graphics是高度集成于UIView和其他UIKit部分的。Core Graphics数据结构和函数可以通过前缀CG来识别。</p>
</li>
<li><p>视图可以通过子视图、图层或实现drawRect：方法来表现内容，如果说实现了drawRect：方法，那么最好就不要混用其他方法了，如图层和子视图。自定义绘图大部分是由UIKit或者Core Graphics来实现的。</p>
</li>
<li><p>由于像素是依赖于目标的，所以2D绘图并不能操作单独的像素，我们可以从上下文（Context）读取它。<br>绘图就好比在画布上拿着画笔机械的进行画画，通过制定不同的参数来进行不同的绘制。</p>
</li>
</ul>
<a id="more"></a>
<h1 id="iOS常见的图形绘制"><a href="#iOS常见的图形绘制" class="headerlink" title="iOS常见的图形绘制"></a>iOS常见的图形绘制</h1><ul>
<li>画线</li>
<li>画圆、圆弧、贝塞尔曲线</li>
<li>画矩形、椭圆形、多边形</li>
<li>绘制图片</li>
<li>绘制文字</li>
</ul>
<hr>
<h1 id="iOS绘图基础"><a href="#iOS绘图基础" class="headerlink" title="iOS绘图基础"></a>iOS绘图基础</h1><p>在绘图之前，我们先来了解一下几个基本的概念</p>
<ul>
<li><p>context：上下文，ios绘图的方法都需要传一个上下文context，这个context在重写uiview的drawRect的方法里调用UIGraphicsGetCurrentContext()获取</p>
</li>
<li><p>path：路径，ios绘图可以想象为你拿着一支笔去画图，画几条线或几个点从而形成一个路径，之后可以利用理解去填色或者描边</p>
</li>
<li><p>stroke,fill 描边和填充，每个路径都需要填充或者描边后才能在视图中看见，他们都各自有很多样式可以设置，常见的有颜色、粗细、渐变，连接样式等等。</p>
</li>
<li><p>画图可以使用默认路径画，或者单独创建path画图，对应画图的api并不完全相同，是两组名称相似的api，两组api常用的方法如下</p>
</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CGContextMoveToPoint</span>   <span class="comment">//设置起点</span></div><div class="line"><span class="built_in">CGContextClosePath</span>     <span class="comment">//连接起点和当前点</span></div><div class="line"><span class="built_in">CGPathCreateMutable</span>    <span class="comment">//类似于 CGContextBeginPath</span></div><div class="line"><span class="built_in">CGPathMoveToPoint</span>      <span class="comment">//类似于 CGContextMoveToPoint</span></div><div class="line"><span class="built_in">CGPathAddLineToPoint</span>   <span class="comment">//类似于 CGContextAddLineToPoint</span></div><div class="line"><span class="built_in">CGPathAddCurveToPoint</span>  <span class="comment">//类似于 CGContextAddCurveToPoint</span></div><div class="line"><span class="built_in">CGPathAddEllipseInRect</span> <span class="comment">//类似于 CGContextAddEllipseInRect</span></div><div class="line"><span class="built_in">CGPathAddArc</span>           <span class="comment">//类似于 CGContextAddArc</span></div><div class="line"><span class="built_in">CGPathAddRect</span>          <span class="comment">//类似于 CGContextAddRect</span></div><div class="line"><span class="built_in">CGPathCloseSubpath</span>     <span class="comment">//类似于 CGContextClosePath</span></div><div class="line"><span class="built_in">CGContextAddPath</span>       <span class="comment">//函数把一个路径添加到graphics</span></div></pre></td></tr></table></figure>
<h2 id="画图步骤"><a href="#画图步骤" class="headerlink" title="画图步骤"></a>画图步骤</h2><ul>
<li>获取context</li>
<li>设置Path</li>
<li>填充或描边路径</li>
</ul>
<h2 id="关于填充颜色-有三种方式"><a href="#关于填充颜色-有三种方式" class="headerlink" title="关于填充颜色 有三种方式"></a>关于填充颜色 有三种方式</h2><ul>
<li>填充笔触，就是只给路径描边</li>
<li>根据路径填充颜色 </li>
<li>填充笔触和颜色</li>
</ul>
<p><strong>填充颜色也分为非零绕数规则和奇偶规则，这个概念比较复杂难以解释，大家可以百度看看或者画几个图试试就明白。</strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CGContextStrokePath</span>(ctx);    <span class="comment">//描出路径</span></div><div class="line"><span class="built_in">CGContextFillPath</span>(ctx)       <span class="comment">//使用非零绕数规则填充当前路径</span></div><div class="line"><span class="built_in">CGContextDrawPath</span>	         <span class="comment">//两个参数决定填充规则，kCGPathFill表示用非零绕数规则，kCGPathEOFill表示用奇偶规则，kCGPathFillStroke表示填充，kCGPathEOFillStroke表示描线，不是填充</span></div><div class="line"><span class="built_in">CGContextEOFillPath</span>	         <span class="comment">//使用奇偶规则填充当前路径</span></div><div class="line"><span class="built_in">CGContextFillRect</span>	         <span class="comment">//填充指定的矩形</span></div><div class="line"><span class="built_in">CGContextFillRects</span>	         <span class="comment">//填充指定的一些矩形</span></div><div class="line"><span class="built_in">CGContextFillEllipseInRect</span>	  <span class="comment">//填充指定矩形中的椭圆</span></div></pre></td></tr></table></figure>
<h1 id="常见的图形绘制"><a href="#常见的图形绘制" class="headerlink" title="常见的图形绘制"></a>常见的图形绘制</h1><p><strong>准备工作</strong></p>
<ul>
<li>新建一个文件，继承UIView</li>
<li>重写<code>-(void)drawRect:(CGRect)rect</code>方法</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">-(<span class="keyword">void</span>)drawRect:(<span class="built_in">CGRect</span>)rect&#123;</div><div class="line"></div><div class="line">    [<span class="keyword">super</span> drawRect:rect];</div><div class="line"></div><div class="line">    <span class="comment">//获取ctx</span></div><div class="line">    <span class="built_in">CGContextRef</span> ctx = <span class="built_in">UIGraphicsGetCurrentContext</span>();</div><div class="line"></div><div class="line">    <span class="comment">//设置画图相关样式参数</span></div><div class="line"></div><div class="line">    <span class="comment">//设置笔触颜色</span></div><div class="line">    <span class="built_in">CGContextSetStrokeColorWithColor</span>(ctx, [<span class="built_in">UIColor</span> blackColor].CGColor);<span class="comment">//设置颜色有很多方法，我觉得这个方法最好用</span></div><div class="line">    <span class="comment">//设置笔触宽度</span></div><div class="line">    <span class="built_in">CGContextSetLineWidth</span>(ctx, <span class="number">2</span>);</div><div class="line">    <span class="comment">//设置填充色</span></div><div class="line">    <span class="built_in">CGContextSetFillColorWithColor</span>(ctx, [<span class="built_in">UIColor</span> purpleColor].CGColor);</div><div class="line">    <span class="comment">//设置拐点样式</span></div><div class="line">    <span class="comment">//    enum CGLineJoin &#123;</span></div><div class="line">    <span class="comment">//        kCGLineJoinMiter, //尖的，斜接</span></div><div class="line">    <span class="comment">//        kCGLineJoinRound, //圆</span></div><div class="line">    <span class="comment">//        kCGLineJoinBevel //斜面</span></div><div class="line">    <span class="comment">//    &#125;;</span></div><div class="line">    <span class="built_in">CGContextSetLineJoin</span>(ctx, kCGLineJoinRound);</div><div class="line">    <span class="comment">//Line cap 线的两端的样式</span></div><div class="line">    <span class="comment">//    enum CGLineCap &#123;</span></div><div class="line">    <span class="comment">//        kCGLineCapButt,</span></div><div class="line">    <span class="comment">//        kCGLineCapRound,</span></div><div class="line">    <span class="comment">//        kCGLineCapSquare</span></div><div class="line">    <span class="comment">//    &#125;;</span></div><div class="line">    <span class="built_in">CGContextSetLineCap</span>(ctx, kCGLineCapRound);</div><div class="line">    <span class="comment">//虚线线条样式</span></div><div class="line">    <span class="comment">//CGFloat lengths[] = &#123;10,10&#125;;</span></div><div class="line"></div><div class="line">    <span class="comment">//画线</span></div><div class="line">    [<span class="keyword">self</span> drawLine:ctx];</div><div class="line"></div><div class="line">    <span class="comment">//画圆、圆弧</span></div><div class="line">    [<span class="keyword">self</span> drawCircle:ctx];</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//画矩形,画椭圆，多边形</span></div><div class="line">    [<span class="keyword">self</span> drawShape:ctx];</div><div class="line"></div><div class="line">    <span class="comment">//画图片</span></div><div class="line">    [<span class="keyword">self</span> drawPicture:ctx];</div><div class="line"></div><div class="line">    <span class="comment">//画文字</span></div><div class="line">    [<span class="keyword">self</span> drawText:ctx];</div><div class="line"></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="画线"><a href="#画线" class="headerlink" title="画线"></a>画线</h2><p><strong>第一个方法我写的比较详细，写了使用path的方式和直接画线的方式。推荐使用path的方式画线。 另外，第一个方法也写了移动笔触画线和用点集合画线。后面方法只会涉及其中一种，因为方法都比较类似。</strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//画线</span></div><div class="line">  -(<span class="keyword">void</span>)drawLine:(<span class="built_in">CGContextRef</span>)ctx&#123;</div><div class="line"></div><div class="line">      <span class="comment">//画一条简单的线</span></div><div class="line">      <span class="built_in">CGPoint</span> points1[] = &#123;<span class="built_in">CGPointMake</span>(<span class="number">10</span>, <span class="number">30</span>),<span class="built_in">CGPointMake</span>(<span class="number">300</span>, <span class="number">30</span>)&#125;;</div><div class="line">      <span class="built_in">CGContextAddLines</span>(ctx,points1, <span class="number">2</span>);</div><div class="line"></div><div class="line"></div><div class="line">      <span class="comment">//画线方法1，使用CGContextAddLineToPoint画线，需要先设置一个起始点</span></div><div class="line">      <span class="comment">//设置起始点</span></div><div class="line">      <span class="built_in">CGContextMoveToPoint</span>(ctx, <span class="number">50</span>, <span class="number">50</span>);</div><div class="line">      <span class="comment">//添加一个点</span></div><div class="line">      <span class="built_in">CGContextAddLineToPoint</span>(ctx, <span class="number">100</span>,<span class="number">50</span>);</div><div class="line">      <span class="comment">//在添加一个点，变成折线</span></div><div class="line">      <span class="built_in">CGContextAddLineToPoint</span>(ctx, <span class="number">150</span>, <span class="number">100</span>);</div><div class="line"></div><div class="line"></div><div class="line">      <span class="comment">//画线方法2</span></div><div class="line">      <span class="comment">//构造线路径的点数组</span></div><div class="line">      <span class="built_in">CGPoint</span> points2[] = &#123;<span class="built_in">CGPointMake</span>(<span class="number">60</span>, <span class="number">60</span>),<span class="built_in">CGPointMake</span>(<span class="number">80</span>, <span class="number">120</span>),<span class="built_in">CGPointMake</span>(<span class="number">20</span>, <span class="number">300</span>)&#125;;</div><div class="line">      <span class="built_in">CGContextAddLines</span>(ctx,points2, <span class="number">3</span>);</div><div class="line"></div><div class="line"></div><div class="line">      <span class="comment">//利用路径去画一组点（推荐使用路径的方式，虽然多了几行代码，但是逻辑更清晰了）</span></div><div class="line">      <span class="comment">//第一个路径</span></div><div class="line">      <span class="built_in">CGMutablePathRef</span> path1 = <span class="built_in">CGPathCreateMutable</span>();</div><div class="line">      <span class="built_in">CGPathMoveToPoint</span>(path1, &amp;<span class="built_in">CGAffineTransformIdentity</span>, <span class="number">0</span>, <span class="number">200</span>);</div><div class="line">      <span class="comment">//CGAffineTransformIdentity 类似于初始化一些参数</span></div><div class="line">      <span class="built_in">CGPathAddLineToPoint</span>(path1, &amp;<span class="built_in">CGAffineTransformIdentity</span>, <span class="number">100</span>, <span class="number">250</span>);</div><div class="line">      <span class="built_in">CGPathAddLineToPoint</span>(path1, &amp;<span class="built_in">CGAffineTransformIdentity</span>, <span class="number">310</span>, <span class="number">210</span>);</div><div class="line">      <span class="comment">//路径1加入context</span></div><div class="line">      <span class="built_in">CGContextAddPath</span>(ctx, path1);</div><div class="line">      <span class="comment">//path同样有方法CGPathAddLines(),和CGContextAddLines()差不多用户，可以自己试下</span></div><div class="line"></div><div class="line">      <span class="comment">//描出笔触</span></div><div class="line">      <span class="built_in">CGContextStrokePath</span>(ctx);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h2 id="画矩形、椭圆形、多边形"><a href="#画矩形、椭圆形、多边形" class="headerlink" title="画矩形、椭圆形、多边形"></a>画矩形、椭圆形、多边形</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//画矩形,画椭圆，多边形</span></div><div class="line">-(<span class="keyword">void</span>)drawSharp:(<span class="built_in">CGContextRef</span>)ctx&#123;</div><div class="line"></div><div class="line">    <span class="built_in">CGContextSetFillColorWithColor</span>(ctx, [<span class="built_in">UIColor</span> redColor].CGColor);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//画椭圆，如果长宽相等就是圆</span></div><div class="line">    <span class="built_in">CGContextAddEllipseInRect</span>(ctx, <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">250</span>, <span class="number">50</span>, <span class="number">50</span>));</div><div class="line"></div><div class="line">    <span class="comment">//画矩形,长宽相等就是正方形</span></div><div class="line">    <span class="built_in">CGContextAddRect</span>(ctx, <span class="built_in">CGRectMake</span>(<span class="number">70</span>, <span class="number">250</span>, <span class="number">50</span>, <span class="number">50</span>));</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//画多边形，多边形是通过path完成的</span></div><div class="line">    <span class="built_in">CGMutablePathRef</span> path = <span class="built_in">CGPathCreateMutable</span>();</div><div class="line">    <span class="built_in">CGPathMoveToPoint</span>(path, &amp;<span class="built_in">CGAffineTransformIdentity</span>, <span class="number">120</span>, <span class="number">250</span>);</div><div class="line">    <span class="built_in">CGPathAddLineToPoint</span>(path, &amp;<span class="built_in">CGAffineTransformIdentity</span>, <span class="number">200</span>, <span class="number">250</span>);</div><div class="line">    <span class="built_in">CGPathAddLineToPoint</span>(path, &amp;<span class="built_in">CGAffineTransformIdentity</span>, <span class="number">180</span>, <span class="number">300</span>);</div><div class="line">    <span class="built_in">CGPathCloseSubpath</span>(path);</div><div class="line">    <span class="built_in">CGContextAddPath</span>(ctx, path);</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">//填充</span></div><div class="line">    <span class="built_in">CGContextFillPath</span>(ctx);</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="画图"><a href="#画图" class="headerlink" title="画图"></a>画图</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//画图片</span></div><div class="line">-(<span class="keyword">void</span>)drawPicture:(<span class="built_in">CGContextRef</span>)context&#123;</div><div class="line">    <span class="comment">/*图片*/</span></div><div class="line">    <span class="built_in">UIImage</span> *image = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"head.jpeg"</span>];</div><div class="line">    [image drawInRect:<span class="built_in">CGRectMake</span>(<span class="number">10</span>, <span class="number">300</span>, <span class="number">100</span>, <span class="number">100</span>)];<span class="comment">//在坐标中画出图片</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="画文字"><a href="#画文字" class="headerlink" title="画文字"></a>画文字</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//画文字</span></div><div class="line"> -(<span class="keyword">void</span>)drawText:(<span class="built_in">CGContextRef</span>)ctx&#123;</div><div class="line"></div><div class="line"></div><div class="line">     <span class="comment">//文字样式</span></div><div class="line">     <span class="built_in">UIFont</span> *font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">18</span>];</div><div class="line">     <span class="built_in">NSDictionary</span> *dict = @&#123;<span class="built_in">NSFontAttributeName</span>:font,</div><div class="line">                            <span class="built_in">NSForegroundColorAttributeName</span>:[<span class="built_in">UIColor</span> whiteColor]&#125;;</div><div class="line"></div><div class="line">     [<span class="string">@"hello world"</span> drawInRect:<span class="built_in">CGRectMake</span>(<span class="number">120</span> , <span class="number">350</span>, <span class="number">500</span>, <span class="number">50</span>) withAttributes:dict];</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h2 id="画圆、圆弧、贝塞尔曲线"><a href="#画圆、圆弧、贝塞尔曲线" class="headerlink" title="画圆、圆弧、贝塞尔曲线"></a>画圆、圆弧、贝塞尔曲线</h2><p><strong>画圆和圆弧是一回事，只是起点和重点位置不同，画圆画弧线主要依赖于这几个方法 <code>CGContextAddArc</code>,<code>CGContextAddArcToPoint</code>, <code>CGContextAddCurveToPoint</code>,<code>CGContextAddQuadCurveToPoint</code> 后面两个方法是贝塞尔二次曲线和三次曲线</strong></p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//画圆、圆弧</span></div><div class="line"> -(<span class="keyword">void</span>)drawCircle:(<span class="built_in">CGContextRef</span>)ctx&#123;</div><div class="line"></div><div class="line">     <span class="built_in">CGContextSetStrokeColorWithColor</span>(ctx, [<span class="built_in">UIColor</span> purpleColor].CGColor);</div><div class="line"></div><div class="line">     <span class="comment">/* 绘制路径 方法一</span></div><div class="line">      void CGContextAddArc (</div><div class="line">      CGContextRef c,</div><div class="line">      CGFloat x,             //圆心的x坐标</div><div class="line">      CGFloat y,    //圆心的x坐标</div><div class="line">      CGFloat radius,   //圆的半径</div><div class="line">      CGFloat startAngle,    //开始弧度</div><div class="line">      CGFloat endAngle,   //结束弧度</div><div class="line">      int clockwise          //0表示顺时针，1表示逆时针</div><div class="line">      );</div><div class="line">      */</div><div class="line"></div><div class="line">     <span class="comment">//圆</span></div><div class="line">     <span class="built_in">CGContextAddArc</span> (ctx, <span class="number">100</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">0</span>, M_PI* <span class="number">2</span> , <span class="number">0</span>);</div><div class="line">     <span class="built_in">CGContextStrokePath</span>(ctx);</div><div class="line"></div><div class="line">     <span class="comment">//半圆</span></div><div class="line">     <span class="built_in">CGContextAddArc</span> (ctx, <span class="number">100</span>, <span class="number">200</span>, <span class="number">50</span>, <span class="number">0</span>, M_PI*<span class="number">2</span>, <span class="number">0</span>);</div><div class="line">     <span class="built_in">CGContextStrokePath</span>(ctx);</div><div class="line"></div><div class="line">     <span class="comment">//绘制路径 方法二，这方法适合绘制弧度 ，端点p1和p2是弧线的控制点，类似photeshop中钢笔工具控制曲线，还不明白请去了解贝塞尔曲线</span></div><div class="line">     <span class="comment">//    void CGContextAddArcToPoint(</span></div><div class="line">     <span class="comment">//                                CGContextRef c,</span></div><div class="line">     <span class="comment">//                                CGFloat x1,  //端点1的x坐标</span></div><div class="line">     <span class="comment">//                                CGFloat y1,  //端点1的y坐标</span></div><div class="line">     <span class="comment">//                                CGFloat x2,  //端点2的x坐标</span></div><div class="line">     <span class="comment">//                                CGFloat y2,  //端点2的y坐标</span></div><div class="line">     <span class="comment">//                                CGFloat radius //半径</span></div><div class="line">     <span class="comment">//                                )；</span></div><div class="line"></div><div class="line">     <span class="comment">//1/4弧度 * 4</span></div><div class="line">     <span class="built_in">CGContextMoveToPoint</span>(ctx, <span class="number">200</span>, <span class="number">200</span>);</div><div class="line">     <span class="built_in">CGContextAddArcToPoint</span>(ctx, <span class="number">200</span>, <span class="number">100</span>,<span class="number">300</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line">     <span class="built_in">CGContextAddArcToPoint</span>(ctx, <span class="number">400</span>, <span class="number">100</span>,<span class="number">400</span>, <span class="number">200</span>, <span class="number">100</span>);</div><div class="line">     <span class="built_in">CGContextAddArcToPoint</span>(ctx, <span class="number">400</span>, <span class="number">300</span>,<span class="number">300</span>, <span class="number">300</span>, <span class="number">100</span>);</div><div class="line">     <span class="built_in">CGContextAddArcToPoint</span>(ctx, <span class="number">200</span>, <span class="number">300</span>,<span class="number">200</span>, <span class="number">200</span>, <span class="number">100</span>);</div><div class="line">     <span class="built_in">CGContextStrokePath</span>(ctx);</div><div class="line"></div><div class="line">     <span class="comment">//贝塞尔曲线</span></div><div class="line">     <span class="built_in">CGContextSetStrokeColorWithColor</span>(ctx, [<span class="built_in">UIColor</span> orangeColor].CGColor);</div><div class="line"></div><div class="line">     <span class="comment">//三次曲线函数</span></div><div class="line">     <span class="comment">//void CGContextAddCurveToPoint (</span></div><div class="line">     <span class="comment">//                               CGContextRef c,</span></div><div class="line">     <span class="comment">//                               CGFloat cp1x, //控制点1 x坐标</span></div><div class="line">     <span class="comment">//                               CGFloat cp1y, //控制点1 y坐标</span></div><div class="line">     <span class="comment">//                               CGFloat cp2x, //控制点2 x坐标</span></div><div class="line">     <span class="comment">//                               CGFloat cp2y, //控制点2 y坐标</span></div><div class="line">     <span class="comment">//                               CGFloat x,  //直线的终点 x坐标</span></div><div class="line">     <span class="comment">//                               CGFloat y  //直线的终点 y坐标</span></div><div class="line">     <span class="comment">//                               );</span></div><div class="line"></div><div class="line">     <span class="built_in">CGContextMoveToPoint</span>(ctx, <span class="number">200</span>, <span class="number">200</span>);</div><div class="line">     <span class="built_in">CGContextAddCurveToPoint</span>(ctx, <span class="number">200</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">200</span>, <span class="number">400</span>, <span class="number">100</span>);</div><div class="line">     <span class="built_in">CGContextStrokePath</span>(ctx);</div><div class="line"></div><div class="line">     <span class="comment">//三次曲线可以画圆弧，比如这里画一条之前用CGContextAddArcToPoint构成的圆弧</span></div><div class="line">     <span class="built_in">CGContextMoveToPoint</span>(ctx, <span class="number">200</span>, <span class="number">200</span>);</div><div class="line">     <span class="built_in">CGContextAddCurveToPoint</span>(ctx, <span class="number">200</span>, <span class="number">100</span>, <span class="number">300</span>, <span class="number">100</span>, <span class="number">300</span> ,<span class="number">100</span>);</div><div class="line">     <span class="built_in">CGContextStrokePath</span>(ctx);</div><div class="line">     <span class="comment">//二次曲线函数</span></div><div class="line">     <span class="comment">//void CGContextAddQuadCurveToPoint (</span></div><div class="line">     <span class="comment">//                                   CGContextRef c,</span></div><div class="line">     <span class="comment">//                                   CGFloat cpx,  //控制点 x坐标</span></div><div class="line">     <span class="comment">//                                   CGFloat cpy,  //控制点 y坐标</span></div><div class="line">     <span class="comment">//                                   CGFloat x,  //直线的终点 x坐标</span></div><div class="line">     <span class="comment">//                                   CGFloat y  //直线的终点 y坐标</span></div><div class="line">     <span class="comment">//                                   );</span></div><div class="line"></div><div class="line">     <span class="built_in">CGContextMoveToPoint</span>(ctx, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line">     <span class="built_in">CGContextAddQuadCurveToPoint</span>(ctx, <span class="number">200</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">150</span>);</div><div class="line">     <span class="built_in">CGContextStrokePath</span>(ctx);</div><div class="line"></div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>因为代码可以直接拷贝下去用，也就不上传到Github上的demo里了。</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/06/24/Swift学习笔记（一）/" class="prev"><button class="ui button teal">PREV</button></a><a href="/2016/05/25/iOS开发——MJExtension的实际使用，JSON格式解析/" class="next"><button class="ui button teal">NEXT</button></a></div><div data-thread-key="2016/06/04/iOS开发——Core-Graphics绘图/" data-title="iOS开发——Core Graphics绘图" data-url="http://yoursite.com/2016/06/04/iOS开发——Core-Graphics绘图/" class="ds-share"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><span class="ds-more">分享到：</span></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul></div></div><div data-thread-key="2016/06/04/iOS开发——Core-Graphics绘图/" data-title="iOS开发——Core Graphics绘图" data-url="http://yoursite.com/2016/06/04/iOS开发——Core-Graphics绘图/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"originalee"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
   || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2015 - 2017 <a href="http://yoursite.com">Originalee</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and theme by <a href="https://github.com/littlewin-wang/hexo-theme-casual" target="_blank">casual</a></p></div></footer></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script><script src="/js/jquery.goup.min.js"></script><script src="/js/semantic.min.js"></script><script src="/js/casual.js"></script><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>$(document).ready(function(){$.goup({trigger:100,bottomOffset:100,locationOffset:5,title:'',titleAsText:true});});</script><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','TvAnFS4AVxjiJUvrZJRB','2.0.0');</script></div></body></html>